Assignment 2: Transport Layer and
Network Simulations using NS-3

-------------------------------------------------------------------------------------------------------------------------------
Goal of the Assignment:
Part 1: Study and understand Transport layer protocol using Wireshark and other tools.
Part 2: Understand NS-3 basics and use NS-3 to study variation in Congestion Window.
Part 3: Study and understand different TCP variants by reading research articles.
-------------------------------------------------------------------------------------------------------------------------------
Part 1: Wireshark/tshark/tcpdump [23 Points]
1. Download a large file (i. ubuntu image from Internet and ii. Ubuntu image from intranet).
60 seconds of observation is sufficient. Plot the following metrics from Wireshark and write
inferences.
a. Plot the estimated Round Trip Time (RTT) variation for intranet and internet
download [2 Points]
b. Plot the TCP Congestion window (or the difference in ack numbers - bytes
delivered) for both intranet and internet download. X-axis is time and Y-axis is
byted delivered (X ticks for each RTT , hence sum up the bytes delivered over
each RTT). [3 Points]
c. Get the flow graph (Statistics - flow graph) [2 Points].
d. What is the average throughput observed in both cases [2 Points].
e. Plot the the receiver congestion window advertised over time [2 Points].
f. Plot the number of 1-duplicate ack, 2-duplicate ack and 3-duplicate acks received
over time [1+1+1=3 Points].

2. Download a small file and identify the TCP 3-way handshake? [3 Points]
3. Ping a host and and capture the packets with wireshark. What kind of packets are generated
by the ping command? [3 Points]
4. Use nmap (using command nmap –PS [neighbours ip address]) to perform the host scan
(same as used in previous question) and capture the packets with wireshark. What kind of
packets are generated by nmap? [3 Points]
Intranet link: https://www.iitbhilai.ac.in/index.php?pid=itis_intranet

Part 2: NS-3 Basics and Understanding TCP Congestion
Window using NS-3 [15 Points]

1. Create a simple topology of two nodes (Node1, Node2) separated by a point-to-point link (you
can use first.cc). Setup a UdpClient on one Node1 and a UdpServer on Node2. Let it be of a fixed
data rate R1. Start the client application, and measure end to end throughput while varying the
latency of the link. Plot latency vs throughput graph. [5 Points]

2. Use TCP_Demo.cc file for this part. The file is similar to sixth.cc/seventh.cc files available in
examples/tutorial folder of NS-3. In this part of the assignment, you will use two different TCP
variants (NewReno and CUBIC) and study the changes in the congestion window over time. You
must run the simulations by varying TCP variants. The TCP variant can be changed as shown
below:
//TODO: TCP variant set to NewReno/TcpCubic
//Config::SetDefault("ns3::TcpL4Protocol::SocketType", TypeIdValue
(TcpNewReno::GetTypeId()));
Config::SetDefault("ns3::TcpL4Protocol::SocketType", TypeIdValue
(TcpCubic::GetTypeId()));

The following code will help you to get the congestion window trace file which is already
included in the TCP_Demo.cc
//trace cwnd
AsciiTraceHelper asciiTraceHelper;

Ptr<OutputStreamWrapper> stream = asciiTraceHelper.CreateFileStream ("tcp-
demo.cwnd");

ns3TcpSocket->TraceConnectWithoutContext ("CongestionWindow",
MakeBoundCallback (&CwndChange, stream));

Use Gnuplot or any other tool to plot the CW values. You can use following Gnuplot script to
plot.
set terminal png
set output "CW.png"
set title "Congestion window Plot"
set xlabel "Time (Seconds)"
set ylabel "Congestion Window"
plot "tcp-demo.cwnd" using 1:2 with linespoints title "Old Cwnd", "tcp-demo.cwnd"
using 1:3 with linespoints title "New Cwnd"
These lines are copied in the CW.plt which you can run to plot congestion window over time.
After running you will get CW.png.
>> gnuplot CW.plt

Answer the following questions for both the TCP variants:
1. How many times did the TCP algorithm reduce the cwnd, and why? [4 Points]
2. Out of these two TCP variants which variant is better, and why? [3 Points]
3. What happens to congestion window in following cases: [3 Points]
i) Increase the link bandwidth
ii) Increase the link delay
iii) Increase the error-rate

Part 3: Study of TCP Congestion Control Algorithms [20 Points]

Explain and compare any four TCP congestion control algorithms (TCP Variants).

Out of four TCP congestion control algorithms, one must be TCP Cubic, at least one algorithm
should be from loss-based, delay based, and hybrid category. Definitions of these categories are
given below and some of the TCP variants are shown in the table.
1. Loss based TCP variants uses packet loss as an indication of Congestion.
2. Delay based TCP variants considers packet delay rather than packet loss as congestion in
the network.

3. In hybrid type of TCP variant both packet loss and delay of packet is considered as a
congestion in network.

Note: Refer research papers for different algorithms. Report should have following points
➔ Algorithm Details
➔ Suitable for which scenarios and where it fails
➔ Compare all four variants in the end and write inferences

Note for Part 3: Do not copy and paste from the paper, understand the algorithms. This
assignment will be evaluated through presentation by students. TAs can randomly pick some
students and ask them to present the submitted report for evaluation.

Deliverables in a tar ball on GC:

● Submission Guidelines: Upload the Assignment Report in GC as a tar ball with file name
as <your roll no>_<your name>.tar
● Readable Report [2 Marks for report quality] enumerating steps followed with
screenshots for each of the important steps.
○ Link to download the collected Pcap trace and mention the command/tool used.
○ Put the screenshots in the report for better clarity
● For all the experiments write the inferences which you have observed.
● If you want, you can use CAPTCP [TCP Analyzer] tool or any other tool for Part 1.

Check Web sources for more information
